# -----------------------------
# Secret: stores sensitive configuration (passwords, connection strings)
# Using a Secret is safer than a ConfigMap for credentials.
# NOTE: stringData is convenient for writing plain text, but the Secret will be stored as base64 in Kubernetes.
# -----------------------------
apiVersion: v1
kind: Secret
metadata:
  name: pm-secrets                 # Secret name referenced by Deployments
  namespace: pm                    # Namespace where this Secret lives
type: Opaque                        # Generic key/value secret type
stringData:
  # Password for the Postgres user (used by the Postgres container on first init)
  POSTGRES_PASSWORD: pm_pass

  # Full DB connection string used by apps (dashboard/logger/etc.)
  # Format: postgresql://<user>:<password>@<service-name>:<port>/<db-name>
  # Here, "db" is the Kubernetes Service name for Postgres (internal DNS in the pm namespace).
  DATABASE_URL: postgresql://pm_user:pm_pass@db:5432/pm_db
